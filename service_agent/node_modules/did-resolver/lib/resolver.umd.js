!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.didResolver={})}(this,function(r){function e(){var r=new Map;return function(e,t){try{var n=!1;function i(i){if(n)return i;var o=r.get(e.did);return void 0!==o?o:Promise.resolve(t()).then(function(t){return null!==t&&r.set(e.did,t),t})}var o=function(){if(e.params&&"true"===e.params["no-cache"])return n=!0,Promise.resolve(t())}();return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(r){return Promise.reject(r)}}}function t(r,e){return e()}var n=new RegExp("^did:([a-zA-Z0-9_]+):([a-zA-Z0-9_.-]+(:[a-zA-Z0-9_.-]+)*)((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$");function i(r){if(""===r||!r)throw new Error("Missing DID");var e=r.match(n);if(e){var t={did:"did:"+e[1]+":"+e[2],method:e[1],id:e[2],didUrl:r};if(e[4]){var i=e[4].slice(1).split(";");t.params={};for(var o=0,a=i;o<a.length;o+=1){var u=a[o].split("=");t.params[u[0]]=u[1]}}return e[6]&&(t.path=e[6]),e[7]&&(t.query=e[7].slice(1)),e[8]&&(t.fragment=e[8].slice(1)),t}throw new Error("Invalid DID "+r)}var o=function(r,n){void 0===r&&(r={}),this.registry=r,this.cache=!0===n?e():n||t};o.prototype.resolve=function(r){try{var e=!1,t=this;function n(r){if(e)return r;throw new Error("Unsupported DID method: '"+o.method+"'")}var o=i(r),a=t.registry[o.method],u=function(){if(a)return Promise.resolve(t.cache(o,function(){return a(o.did,o,t)})).then(function(r){if(null==r)throw new Error("resolver returned null for "+o.did);return e=!0,r})}();return u&&u.then?u.then(n):n(u)}catch(r){return Promise.reject(r)}},r.inMemoryCache=e,r.noCache=t,r.parse=i,r.Resolver=o});
//# sourceMappingURL=resolver.umd.js.map
